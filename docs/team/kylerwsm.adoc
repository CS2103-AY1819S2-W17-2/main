= Kyler Wong - Project Portfolio for TeethHub
:site-section: AboutUs
:imagesDir: ../images
:stylesDir: ../stylesheets

== About the Project: TeethHub

TeethHub is a desktop application specially designed for tech-savvy dentists, who prefers to use the command line interface, as opposed to the traditional graphical user interface.

The user interacts with the application through the type via the command line interface, and graphical representations of the stored data will be shown.
The program is written in Java.

== Summary of contributions

* *Major enhancement*: greatly enhanced and developed the *person* class into a *dental patient* class
** What it does: This new data structure allows our users to manage extensive information about their dental patients, such as personal information, next-of-kin information, dental records, and teeth layouts.
** Justification: This data structure is the foundation of our product, as TeethHub is an application which aims to assist our dentist users by improving the way they manage their dental patients and records.
** Highlights: This enhancement affects existing commands and commands to be added in the future.
The development of patient required an in-depth knowledge of the dentistry industry, and their common practices.
The implementation too was challenging as it required major changes to existing commands.
Furthermore, it demanded thorough object-oriented thinking and planning as it consists of numerous inter-related classes.

* *Major implementation*: Records Mode, an intuitive *storage manager for dental records*
** What it does: This implementation prompts our users specify a patient before they can manage dental records or edit teeth statuses tied to the specified dental patient. A separate but intuitive user interface is also built for users to facilitate a better user experience in records and teeth management.
** Justification: This feature is essential to TeethHub as the users are expected to handle heavy workloads involving dental records and teeth information of patients.
** Highlights: This enhancement affects how data is stored, written and read.
It required a thorough understanding of the design requirements, as well as its constraints.
The implementation too was demanding, as many factors need to be considered.

* *Minor enhancement*: added a goto command that allows the user to navigate to the records mode, which displays a specified patient's record list.

* *Minor enhancement*: added a back command that allows the user to return back to the patients mode, which displays all the stored patients.

* *Code contributed*: `https://nus-cs2103-ay1819s2.github.io/cs2103-dashboard/#=undefined&search=kylerwsm[via RepoSense]`

* *Other contributions*:

** Project management:
*** Managed releases `v1.1` - `v1.4` (4 releases) on GitHub
*** Ran manual testings and reported found bugs and issues on the group reposition on GitHub (i.e. #57, #58)
** Enhancements to existing features:
*** Added a new GUI to allow users to interact with a specific patient's dental records.
*** Wrote additional tests for new features to significantly increase coverage (~1%).
** Community:
*** Reported bugs and suggestions for other teams in the class (during the mock and actual practical examinations)

== Contributions to the User Guide

|===
|_Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users._
|===

=== General Commands

==== dentist

You can specify the name you want to reflect in your patients' dental record when you create them.

* If there is no dentist name specified, the program will prompt you to enter one.

* This should only happen once, during the first startup of the application.

=== Patient Management

Patient management allows our users to store and modify information of their dental patients.
This includes their personal particulars, next-of-kin information, dental records, and teeth conditions.

==== Patient Add

This command adds a patient to the patients list.

Name, NRIC, and Date of Birth fields are compulsory.
The rest are optional fields, and can be filled in later via the `recordedit` command.

Format: `patientadd PARAMETERS …` or `padd PARAMETERS …`

Parameters:

[cols="3",options=""]
|===
|n/NAME
|s/SEX
|ic/NRIC
|dob/DATE_OF_BIRTH
|p/PHONE_NUMBER
|e/EMAIL
|a/ADDRESS
|da/DRUG_ALLERGY
|nokn/NEXT_OF_KIN_NAME
|nokp/NEXT_OF_KIN_PHONE_NUMBER
|nokr/NEXT_OF_KIN_RELATION
|noka/NEXT_OF_KIN_ADDRESS
|===

[NOTE]
TeethHub determines the uniqueness of patients based on their `NRIC`.

Example:

* `patientadd n/John Choo sex/M ic/S1234567H dob/09-09-1995`

==== Patient Delete

This command deletes the patient specified by `index` from the patients list.

Format: `patientdelete INDEX` or `pdelete INDEX`

* Deletes the patient at the specified index.

* The index refers to the index number shown in the displayed patient list.

* The given index must be a positive integer (e.g 1, 2 or 3…).

Examples:

* `delete 1` -- Deletes the patient shown with index 1 from the displayed list.

[NOTE]
If the patient index is invalid, the application will display an error message to the user.

==== Patient Edit

This command edits the information of an existing patient.

Format: `patientedit INDEX [PREFIX/KEYWORDS]` or `pedit INDEX [PREFIX/KEYWORDS]`

* Edits the patient at the specified index shown from list or find command.
Must be a positive integer (e.g 1, 2 or 3).

* Input the prefix followed by the new value to replace the existing data.
** The full list of possible prefixes can be found in <<Breakdown of attributes used within TeethHub>>

* The given index must be a positive integer (e.g. 1, 2, or 3…).

Parameters that can be edited:

[cols="3",options=""]
|===
|n/NAME
|s/SEX
|ic/NRIC
|dob/DATE_OF_BIRTH
|p/PHONE_NUMBER |p/98765432
|e/EMAIL
|a/ADDRESS
|da/DRUG_ALLERGY
|nokn/NEXT_OF_KIN_NAME
|nokp/NEXT_OF_KIN_PHONE_NUMBER
|nokr/NEXT_OF_KIN_RELATION
|noka/NEXT_OF_KIN_ADDRESS
|===

Example:

* `patientedit 1 ic/S1234567A` -- Edits the `NRIC` of the first patient in the patient list.

==== Patient Copy

Makes an exact copy of a patient and adds them to the patient list.
This is useful if there are multiple people who share similar details.

Format: `patientcopy INDEX [Count]` or `pcopy INDEX [Count]`

Note: If the copied entry is not modified before exiting the program,
there will be a confirmation.

Example:

* `patientcopy 3` +
Makes a patientcopy of the patient at index 3 and inserts it at the bottom of
the current patient list with a copy tag.

* `patientcopy 3 4` +
Makes 4 copies of the patient at index 3 and inserts them at the bottom of
the current patient list with a copy tag.

==== Patient List
Shows a list of all patients or medical stored in TeethHub.

Format: `patientlist` or `plist`

Example:

* `patientlist` +
Shows details of all patients.

==== Patient Find

Shows patients whose data contains any of the given keywords according to a specified parameter.

Format: `patientfind PREFIX/KEYWORD [MORE_KEYWORDS]` or `pfind PREFIX/KEYWORD [MORE_KEYWORDS]`

* Search is case insensitive.
* Order of keywords does not matter.
* Valid `Prefix` values: See <<Breakdown of attributes used within TeethHub>>

Example:

* `find a/Yishun` +
Show all the people with an address containing the keyword Yishun.

==== Patient Clear
Clears all patients, from TeethHub.

* You will be prompted to confirm.
* Input `y` to proceed to the patientclear all records or `n` to abort.

Format: `patientclear`

==== Go To

The goto command specifies a patient by index, and brings the user to the records mode, where all dental records of the specified patient are listed.

Record-related commands can then be executed in this mode.

Format: `goto 1`

* Goes into records mode and displays all dental records of patient 1.

* The given index must be a positive integer (e.g 1, 2 or 3…)

==== Back

The back command can only be run in records mode.
It brings the user back to the patients mode, where all patients will be listed.

Format: `back` -- Brings the user back to patient mode.

[NOTE]
The `back` command will work with parameters, but they will be ignored.

==== Record Add

This command adds a new dental record to the patient.

[NOTE]
`recordadd` requires the application to first be in records mode, via the `goto` command.

Format: `recordadd pro/PROCEDURE desc/DETAILS or `radd pro/PROCEDURE desc/DETAILS`

* The program assigns the name of the dentist stored in the dentist information

* The program assigns the date of record as the date the record is created.

* When records of a patient is accessed, the stored records are sorted from newest to oldest.

* New dental records will appear on the top of the list upon entry.

Example

* `<<goto, goto>> 1` - Displays dental records of the first patient in the list and hides the patient list.

* `recordadd desc/Mouth was noticeably smelly, might have halitosis` - Adds a new dental record.

* `<<back, back>>` - Go back to the patient list.

==== Record Delete

This command deletes a dental record of a specified patient.

[NOTE]
`recorddelete` requires the application to first be in records mode, via the `goto` command.

Format: `recorddelete INDEX` or `rdelete INDEX`

* Deletes the patient’s dental record at the specified index.

* The index refers to the index number shown in the displayed dental record list.

* The given index must be a positive integer (e.g 1, 2 or 3…)

Example:

* `<<goto, goto>> 1` - Displays dental records of the first patient in the list and hides the patient list.

* `recorddelete 1` - patientdelete the latest dental record of the specified patient

* `<<back, back>>` - Go back to the patient list.

==== Record Edit

This command edits a patient’s dental record.

[NOTE]
`recordedit` requires the application to first be in records mode, via the `goto` command.

Format: `recordedit INDEX desc/DETAILS` or `redit INDEX desc/DETAILS`

* Edits the patient's dental record at the specified index.

* The index refers to the index number shown in the displayed dental record list.

* The given index must be a positive integer (e.g 1, 2 or 3…)

* The new description stated in the command will replace the old description in the specified dental record.

Example:

* `<<goto, goto>> 1` - Displays dental records of the first patient in the list and hides the patient list.

* `recordedit 1 desc/corrected description` - Modifies the description of the first dental record of the specified patient.

* `<<back, back>>` - Go back to the patient list.

==== Record Clear

Clears all of a patient's dental records.

Format: `recordclear` or `rclear`

[NOTE]
`recordclear` requires the application to first be in records mode, via the `goto` command.

==== Teeth Create

There is no command required for this feature, as the application automatically generates and stores a new set of all healthy permanent teeth for newly added patients.

TeethHub complies with the most popular standard of the three the Dental Numbering Systems utilised in Dentistry - The Universal Numbering System.

ifdef::env-github[]
image::BaseLayer.png[width="200"]
endif::[]

The upper-case letters A through T are used for primary teeth and the
numbers 1 - 32 are used for permanent teeth. The tooth designated "1" is
the maxillary right third molar ("wisdom tooth") and the count continues
along the upper teeth to the left side. Then the count begins at the
mandibular left third molar, designated number 17, and continues along
the bottom teeth to the right side. Each tooth has a unique number or
letter, allowing for easier use on keyboards.

[NOTE]
At the moment, only the permanent teeth type is supported.

==== Teeth Edit

This command edits a specific tooth of a patient.

Format: `teethedit t/TEETH_LABEL s/STATUS`

* `TEETH_LABEL` are integers 1 to 32, which represents a tooth according to the Universal Numbering System.

* Valid `STATUS` are 0 (for healthy tooth), 1 (for problematic tooth), or 2 (for missing tooth).

Example:

* `<<goto, goto>> 1` - Specifies patient 1 to edit his or her teeth status. User enters the records mode.

* `teethedit t/31 s/2` - This edits the status of tooth 31 of the specified patient to missing.

* `<<back, back>>` - This command allows the user to exit the record edit mode, returning to the patients mode.

=== Breakdown of attributes used within TeethHub
[cols=",,,,,,,", options="header",]
|===
8+^|List of valid prefixes

4+| *Patient* 2+| *Record* 2+| *Next-of-Kin*
|*Prefix* | *Attribute* |*Prefix* | *Attribute* | *Prefix* | *Attribute* | *Prefix* | *Attribute*
|n/ | Name |sex/ | Sex | pro/ | Procedure | nokn/ | NOK Name
|ic/ | Nric |dob/ | Date of Birth |desc/ | Description | nokp/ | NOK Phone
|p/ | Phone |e/ | Email | | | nokr/ | NOK Relation
|a/ | Address | | | | | noka/ | NOK Address

|===

== Contributions to the Developer Guide

|===
|_Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project._
|===

=== Implementations

=== Patient Management Feature
==== Current Implementation: Storing Patient's Information

The `Patient` class represents patients for our users on TeethHub.
It extends `Person` with more patient-specific attributes, as well as methods.
Various methods are also overridden in order for them to work appropriately with the new `Patient` class.

The following class diagram summarizes the new `Patient` class, which extends from `Person`:

image::PatientClassDiagram.png[align="center", width="400"]

==== Current Implementation: Patient's Dental Records

The `Record` class represents a dental record of a patient. Each `Patient` class has an list of `Record` as an attribute.

The `Record` class is purposely implemented to be similar to that of `Person`.
Just like person, record has associate classes for specific operations, such as storage.
This ensures that the processing of records is streamlined with `Patient`, which extends `Person`.

==== Current Implementation: Interface to interact with Patient's Dental Records

The current implementation to view a specified patient's dental records uses the `goto` command.

The `GoToCommand` extends the `Command` abstract class.
The valid form of the command is `goto INDEX`.
The `INDEX` of the command specifies the patient in the patient list, based to their denoted indexes.

On the other hand, the current implementation to go back to the patient list uses the `back` command.

It also extends the `Command` abstract class.
Unlike the `GoToCommand`, the `BackCommand` does not take in any parameters.
The valid form of the command is `back`.

Given below is an example usage scenario and how the goto/back mechanism behaves at each step.

Step 1. The user launches the application for the first time.
All stored patients will be loaded and the user will be shown the patient list by default.

Step 2. The user executes `goto 1` command to view the dental records of the first patient in the dental book.
The `goto` command sets the specified patient in the MainWindow as the first patient.
The patient list is now replaced by the dental record list of the specified patient.

Step 3. The user can now add, edit, or delete dental records, which are tied to the specified patient.

[NOTE]
If the `goto` command is entered while the window is already showing dental records of a specified patient, an error message will be displayed on the window.

Step 4. The user now decides that he wants to view the patient list.
He do so by executing the `back` command.
After which, the record list is replaced by the patient list.

[NOTE]
The `back` command will still work with parameters, but those parameters will be ignored.

Step 5. The user can now add, edit, or delete patients' personal information.

[NOTE]
If the `back` command is entered while the window is already showing patients, an error message will be displayed on the window.

The following activity diagram summarizes what happens when a user executes the `goto` or `back` command:

image::GotoActivityDiagram.png[align=center, width="800"]
{nbsp}

==== Current Implementation: Representing Patient's Teeth

The `Teeth` class represents patients' teeth for our users on TeethHub.
It consist of an array of `Tooth` objects, which represents the individual tooth of patients.

[NOTE]
When a patient is added by the user, TeethHub automatically creates a new set of all healthy and present teeth for the new patient.
At this point of time, only permanent teeth is supported.

Each `Tooth` can be present or absent. If it is present, it can be on or off status.
A tooth on status would mean that it is a problematic tooth (i.e. decaying tooth or dental prosthesis).
A optional status message can be tied to each tooth on status, allowing our users to have a better overview of the tooth if necessary.

The command to edit a specific tooth of a patient is: `teethedit INDEX`.

[NOTE]
The `teethedit` command can only run after a patient is specified via the `goto` command.


The following class diagram summarizes the `Teeth` class, which is a composition of the `Tooth` class:

{nbsp}

image::TeethClassDiagram.png[align=center, width=""]
{nbsp}

==== Current Implementation: Automatically Generated Tags

There are only two types of tags that are valid in the `Patient` class.
They are `StatusTag` and `TeethTag`.
At any time, there can only be one of each kind of those tags.
Unlike in `Person`, users cannot added their own tags to patients.
We have implemented patient tags to be fully automated by our application.

`StatusTag`: Describes the condition of the patient's teeth. The valid options are "Healthy Teeth", "Status Teeth", and "Absent Teeth".
The worst tooth status found in the patient's teeth will be reflected in the teeth status tag.

The activity diagram below demonstrates how TeethHub automatically update the patient's status tag when his or her tooth is edited:

image::StatusTagActivityDiagram.png[align=center, width=""]

`TeethTag`: Describes the teeth type of the patient. The valid options are "Primary Teeth" or "Permanent Teeth".

[NOTE]
Since only permanent teeth is supported by TeethHub at the moment, `TeethTag` will always show "Permanent Teeth".

==== Current Implementation: Dentist Information

Following the single user policy, TeethHub only prompts the user once to acquire his or her name, which will then be used when creating new dental records for patients.

Currently, the application prompts the user for his or her name during his or her first attempt when adding a new dental record to a specified patient via the `RecordAdd` command.

[NOTE]
Currently, the dentist's name is stored in a `.txt` file in TeethHub.
It is possible for users to change their name from the `.txt` file, although they are not encouraged to do so.

==== Current Implementation: Other Relevant Commands

We have also created new commands that will facilitate the `Patient` class.

[NOTE]
The commands below can only be executed after a patient is specified via the `GoTo` command.

`RecordAdd`: Adds a new record to a specified patient.

`RecordEdit`: Edits an existing record of a specified patient.

`RecordDelete`: Deletes an existing record of a specified patient.

`RecordClear`: Clear all records of a specified patient.

==== Design Considerations

===== Aspect: Creating the Patient class

* **Alternative 1 (current choice):** Create the `Patient` class by extending it from `Person`.
** Pros: It is intuitive, as it is logical that all patients are persons as well.
The code from `Person` can be reused in `Patient` through inheritance, and all existing classes and methods which work with `Person` will also work with `Patient`.
Most importantly, it allows us to make use of the object-oriented programming principles we learnt in class.
We assume that the Open-Closed Principle is applied on the `Person` class.
** Cons: Any changes to `Person` may affect `Patient`.
* **Alternative 2:** Create the `Patient` class from the bottom-up.
** Pros: As `Patient` will not be a subclass of any other class, it will be less affected by changes in other classes.
** Cons: All existing classes and methods which currently work with `Person` needs to be re-written to work with the new `Patient` class.
Attributes and methods cannot be reused, and must be re-implemented.
Lastly, polymorphism cannot be applied in cases where there is a need to deal with both persons and patients.

===== Aspect: Picking the appropriate data structure to store dental records

* **Alternative 1 (current choice):** Store the records using a list.
** Pros: It is easy to understand, which is crucial for collaborative programming as other programmers may require accessing the records in the list.
It can also save new records in the order of when they are added, from most recent to oldest, simply using `List.add(0, Record)`.
** Cons: If the list gets long over time, it might cause additional waiting time for our users when they would to search for a specific record.
This is because a linear search in a list is of O(n) time complexity.
 * **Alternative 2:** Store the records using a hash table.
 ** Pros: It gives the fastest time complexity if a record search is required. It runs in O(1) time.
 ** Cons: It can be challenging for collaborators to understand, which can be detrimental for collaborative programming.
 It also creates an extra layer of complexity in order to display the stored records in the order they were first stored in the application by our users.

===== Aspect: How the goto command executes

* **Alternative 1 (current choice):** Use a static variable to store the specified patient, with a public getter method, and a static boolean that denotes the current list viewing mode.
** Pros: This is relatively easy to implement and understand. Furthermore, other classes can easily access the current specified patient, and the current list viewing mode.
** Cons: May cause complications if MainWindow is no longer a singleton class.
* **Alternative 2:** Save the specified patient and list viewing mode as an instance variable of MainWindow.
** Pros: Will work properly even if MainWindow is no longer a singleton class.
** Cons: Challenging to implement as major revamp is required to most existing classes and tests.
All new classes which wish to access the specified patient or list viewing mode will need to take in a reference to the MainWindow instance.

===== Aspect: Data structure to support the goto command

* **Alternative 1 (current choice):** Use a patient variable to store the patient specified by the command.
** Pros: An intuitive solution, as the specified patient is stored as an exact same class as a patient.
Additionally, attributes of the specified patient can be accessed just like any other patient class.
Changes to the patient class does not significantly affect the goto command.
** Cons: The patient class is mutable, and accidental changes to its attributes by other classes or methods can occur.
* **Alternative 2:** Create a new immutable patient variable to store the specified patient.
** Pros: Ensures the the specified patient cannot be edited by other classes or methods.
** Cons: Major changes to the patient class would require the immutable patient class to be changed too.
Furthermore, every time any record of the specified patient is modified, a new immutable patient needs to be created to update the currently stored immutable patient.

===== Aspect: Data structure for Teeth

* **Alternative 1 (current choice):** Create a `Tooth` object representing a tooth, and use an array to store a list of tooth which will represent the teeth of patients.
** Pros: An straightforward object-oriented solution and easy to understand by other collaborating programmers who are familiar with object-oriented programming.
** Cons: `Tooth` and `Teeth` objects, as well as their relevant methods takes a significant amount of time to be created. They will also require proper test cases to be implemented.
* **Alternative 2:** Create an integer array representing teeth. Each integer value in the array indicates the status of a tooth.
** Pros: Simplest to implement.
** Cons: Can be hard to understand by other programmers as integers are used to represent teeth statuses. Additionally, this is violating object-oriented principles.

===== Aspect: Implementing the Dentist class

* **Alternative 1 (current choice):** Use a patient variable to store the patient specified by the command.
** Pros: An intuitive solution, as the specified patient is stored as an exact same class as a patient.
Additionally, attributes of the specified patient can be accessed just like any other patient class.
Changes to the patient class does not significantly affect the goto command.
** Cons: The patient class is mutable, and accidental changes to its attributes by other classes or methods can occur.
* **Alternative 2:** Create a new immutable patient variable to store the specified patient.
** Pros: Ensures the the specified patient cannot be edited by other classes or methods.
** Cons: Major changes to the patient class would require the immutable patient class to be changed too.
Furthermore, every time any record of the specified patient is modified, a new immutable patient needs to be created to update the currently stored immutable patient.

=== Manual Tests

==== Patient and Record lists

. Switching of UI elements when `goto` command is run

.. Prerequisites: List all patients using the `list` command. At least one patient should be displayed in the list.
.. Test case: `goto 1` (Patient of index 1) +
   Expected: The patient list GUI is replaced by the record list GUI. Displays dental records of patient specified by index. The window size may not be optimum. Use the command: `back` to revert to the patient list.
.. Test case: `back` +
   Expected: No GUI elements changed. Error details shown in the status message. Status bar remains the same.

. Switching of UI elements when `back` command is run

.. Prerequisites: Run the `goto 1` command. GUI displays dental record list.
.. Test case: `back` +
   Expected: Shows the GUI with a set of sample patients. An alert box prompts for confirmation. The window size may not be optimum. Use the command: `goto 1` to revert to the dental record list.
.. Test case: `goto` +
   Expected: No GUI elements changed. Error details shown in the status message. Status bar remains the same.

==== Deleting a dental record

. Deleting a record while all dental records of a patient are listed

.. Prerequisites: List all dental records of a patient using the `goto x` command (x refers to the index of the patient to be tested). Multiple dental records should be displayed in the list.
.. Test case: `recorddelete 1` +
   Expected: First dental record is deleted from the list. Details of the deleted dental record is shown in the status message. Timestamp in the status bar is updated.
.. Test case: `recorddelete 0` +
   Expected: No record is deleted. Error details shown in the status message. Status bar remains the same.
.. Other incorrect recorddelete commands to try: `recorddelete`, `record delete`, `recorddelete x` (where x is larger than the list size), `recorddelete y` (where y is a negative number), `recorddelete z` (where z is not an integer) +
   Expected: Similar to previous.

=== User Stories
Priorities: High (must have) - `* * \*`, Medium (nice to have) - `* \*`, Low (unlikely to have) - `*`

[width="100%",cols="",options="header",]
|=======================================================================
|Priority |As a ... |I want to ... |So that I can...
|`* * *` |user |add a new patient's particulars | know about their situation

|`* * *` |user |edit my patient's particulars | their personal information remains updated

|`* * *` |user |store my patient's teeth | track their teeth condition

|`* * *` |user |modify my dental patients' teeth condition | understand and serve my dental patients'
teeth condition better

|`* * *` |user |view my patients' dental records | keep track of my patients' teeth health history

|`* * *` |user |add a new dental record | store diagnosis and treatments of my patients

|`* * *` |user |delete a dental record | remove records that have become redundant or irrelevant

|`* * *` |user |edit a dental record | correct existing dental records

|`* * *` |user |clear all dental records of a patient | protect the privacy of my patients
